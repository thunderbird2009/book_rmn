<!-- Medium Zoom for Images and SVGs -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script>

<style>
  img, .mermaid svg {
    cursor: zoom-in;
    transition: transform 0.3s ease;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Apply medium-zoom to standard images immediately
    mediumZoom(document.querySelectorAll('img'), {
      margin: 24,
      background: '#2d2d2d',
      scrollOffset: 0
    });
  });
</script>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: false });

  document.addEventListener('DOMContentLoaded', () => {
    // Initialize Mermaid
    const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');
    mermaidBlocks.forEach((block) => {
      const content = block.textContent;
      const div = document.createElement('div');
      div.className = 'mermaid';
      div.textContent = content;
      block.parentElement.replaceWith(div);
    });
    
    mermaid.run().then(() => {
      // Apply medium-zoom to Mermaid SVGs after they render
      setTimeout(() => {
        mediumZoom(document.querySelectorAll('.mermaid svg'), {
          margin: 24,
          background: '#2d2d2d',
          scrollOffset: 0
        });
      }, 500); // Small delay to ensure SVG is fully ready
    });
  });
</script>

<!-- MathJax Configuration -->
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
